GAMS Rev 234  WIN-VS8 23.4.3 x86/MS Windows                                                        02/28/12 12:20:00 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


       
       
      Here is a "MAP" of the EBT (coal, fuelgas, oil, refined oil, natural gas, electricity and heat, other energy)
       
       
       
                 PROD    DX       X      DRC     RC     COAL     FG     OIL      ROIL     NG     ELEH    OTHE
       
              ------------------------------------------------------------------------------------------------
      BEJ     |       |       |       |       |       |       |       |       |       |       |       |       |
              ------------------------------------------------------------------------------------------------
      ...
              ------------------------------------------------------------------------------------------------
      XIN     |       |       |       |       |       |       |       |       |       |       |       |       |
              ------------------------------------------------------------------------------------------------
       
                 AGR     IND     CON     TR     WRHR    OTH      FU       INV
              ------------------------------------------------------------------------------------------------
      BEJ     |       |       |       |       |       |       |       |       |       |       |       |       |
              ------------------------------------------------------------------------------------------------
      ...
              ------------------------------------------------------------------------------------------------
      XIN     |       |       |       |       |       |       |       |       |       |       |       |       |
              ------------------------------------------------------------------------------------------------
       
      We need rebalance EBT in order to:
      a) All the data is consitent with the national EBT (0401.xls)
      b) SUM(DX)=SUM(DRC)
       
      After the rebalancing work, we can estimate detailed industry energy consumption of each province.
       
GAMS Rev 234  WIN-VS8 23.4.3 x86/MS Windows                                                        02/28/12 12:20:00 Page 2
Read a single state file
C o m p i l a t i o n


  35   
  39   
  40  *SAM table
  41  set     e       energy product  /
  42           coal    Coal,
  43           fg      Fuel gas,
  44           oil     Crude oil,
  45           roil    Refined oil,
  46           ng      Natural gas,
  47           eleh    Electricity & heat,
  48           othe    Other energy/;
  49  set     indi    egy-intensive sectors    /
  50           COAL,
  51           OIL,
  52           MM,
  53           NM,
  54           FBT,
  55           TXT,
  56           CLO,
  57           LOG,
  58           PAP,
  59           ROIL,
  60           CHE,
  61           NMP,
  62           MSP,
  63           MP,
  64           GSM,
  65           TME,
  66           EME,
  67           CCE,
  68           IM,
  69           AC,
  70           WAS,
  71           ELEH,
  72           FG,
  73           WT/;
  74  set     i       accounts /
  75           PROD    Production,
  76           DX      Domestic outflow,
  77           X       Export,
  78           DRC     Domestic inflow,
  79           RC      Import,
  80           COALT   Coal converted from other energy product,
  81           FGT     Fuel gas converted from other energy product,
  82           OILT   Crude oil converted from other energy product,
  83           ROILT   Refined oil converted from other energy product,
  84           NGT     Natural gas converted from other energy productconverted from other energy product,
  85           ELEHT   Electricity & heat converted from other energy product,
  86           OTHET   Other energy converted from other energy product,
  87           AGR     Agriculture,
  88           IND     Industry,
  89           CON     Construction,
  90           TR      Transportation,
  91           WRHR    Wholesale & retail, hotel & restraurant,
  92           OTH     Other service industry,
  93           FU      Final use,
  94           INV     Inventory change/;
  95   
  96  set      r China provinces       /BEJ,TAJ,HEB,SHX,NMG,LIA,JIL,HLJ,SHH,JSU,ZHJ,ANH,FUJ,JXI,SHD,HEN,HUB,HUN,GUD,GXI,HAI
      ,CHQ,SIC,GZH,YUN,SHA,GAN,NXA,QIH,XIN/;
  97  parameter coal(r,i)           coal ebt
  98  parameter fg(r,i)           fg ebt
  99  parameter oil(r,i)           oil ebt
 100  parameter roil(r,i)           roil ebt
 101  parameter ng(r,i)           ng ebt
 102  parameter eleh(r,i)           eleh ebt
 103  parameter othe(r,i)           othe ebt
 104  parameter ind(*,indi,e)           egy cons of egy by intensive ind
 105  parameter indprov(*,r,e)       egy cons of egy product by province
 106   
GDXIN   C:\Users\DaZHANG\data\ChinaBalancedSAM\data\gdx\egygdx\OIL.gdx
--- LOAD  oil = 1:oil
 110  display OIL
GAMS Rev 234  WIN-VS8 23.4.3 x86/MS Windows                                                        02/28/12 12:20:00 Page 3
Read a single state file
C o m p i l a t i o n


 111   
      set     negval2(r,i,j)     Flag for negative elements;
      set     empty2(r,i,*)      Flag for empty rows and columns;
      parameter       chksam2(r,i,*)       Consistency check of social accounts;
       
      *SAM15
      loop(r,
       
      loop(ri$((ord(ri) le 27)),
      loop(ni$(ord(ni)=ord(ri)),
      loop(rj,
      loop(nj$(ord(nj)=ord(rj)),
      sam15(r,ni,nj)=sam(r,ri,rj);
      );
      );
      );
      );
       
      loop(rj,
      loop(nj$(ord(nj)=ord(rj)),
      sam15(r,"28",nj)=sam(r,"30",rj);
      );
      );
       
       
      *AGGREGATION OF OTH PRODUCTION(other service industry)
      loop(ri$(((ord(ri) ge 31) and (ord(ri) le 42)) or (ord(ri) = 28) or (ord(ri) = 29)),
      loop(rj,
      loop(nj$(ord(nj)=ord(rj)),
      sam15(r,"29",nj)=sam15(r,"29",nj)+sam(r,ri,rj);
      );
      );
      );
       
      loop(ri$((ord(ri) ge 43) and (ord(ri) le 69)),
      loop(ni$(ord(ni)=ord(ri)-12),
      loop(rj,
      loop(nj$(ord(nj)=ord(rj)),
      sam15(r,ni,nj)=sam(r,ri,rj);
      );
      );
      );
      );
       
       
      loop(rj,
      loop(nj$(ord(nj)=ord(rj)),
      sam15(r,"58",nj)=sam(r,"72",rj);
      );
      );
       
      *AGGREGATION OF OTH COMMODITIES(other service industry)
      loop(ri$(((ord(ri) ge 73) and (ord(ri) le 84)) or (ord(ri) = 70) or (ord(ri) = 71)),
      loop(rj,
      loop(nj$(ord(nj)=ord(rj)),
      sam15(r,"59",nj)=sam15(r,"59",nj)+sam(r,ri,rj);
      );
      );
      );
       
      loop(ri$((ord(ri) ge 85) and (ord(ri) le 96)),
      loop(ni$(ord(ni)=ord(ri)-24),
      loop(rj,
      loop(nj$(ord(nj)=ord(rj)),
      sam15(r,ni,nj)=sam(r,ri,rj);
      );
      );
      );
      );
      *end of loop r
      );
       
       
GAMS Rev 234  WIN-VS8 23.4.3 x86/MS Windows                                                        02/28/12 12:20:00 Page 4
Read a single state file
C o m p i l a t i o n


       
       
      *SAM2
       
       
      loop(r,
       
      loop(nj$(ord(nj) le 27),
      loop(j$(ord(j)=ord(nj)),
      loop(ni,
      loop(i$(ord(i)=ord(ni)),
      sam2(r,i,j)=sam15(r,ni,nj);
      );
      );
      );
      );
       
      loop(ni,
      loop(i$(ord(i)=ord(ni)),
      sam2(r,i,"28")=sam15(r,ni,"30");
      );
      );
       
       
      *AGGREGATION OF OTH PRODUCTION(other service industry)
      loop(nj$(((ord(nj) ge 31) and (ord(nj) le 42)) or (ord(nj) = 28) or (ord(nj) = 29)),
      loop(ni,
      loop(i$(ord(i)=ord(ni)),
      sam2(r,i,"29")=sam2(r,i,"29")+sam15(r,ni,nj);
      );
      );
      );
       
      loop(nj$((ord(nj) ge 43) and (ord(nj) le 69)),
      loop(j$(ord(j)=ord(nj)-12),
      loop(ni,
      loop(i$(ord(i)=ord(ni)),
      sam2(r,i,j)=sam15(r,ni,nj);
      );
      );
      );
      );
       
       
      loop(ni,
      loop(i$(ord(i)=ord(ni)),
      sam2(r,i,"58")=sam15(r,ni,"72");
      );
      );
       
      *AGGREGATION OF OTH COMMODITIES(other service industry)
      loop(nj$(((ord(nj) ge 73) and (ord(nj) le 84)) or (ord(nj) = 70) or (ord(nj) = 71)),
      loop(ni,
      loop(i$(ord(i)=ord(ni)),
      sam2(r,i,"59")=sam2(r,i,"59")+sam15(r,ni,nj);
      );
      );
      );
       
      loop(nj$((ord(nj) ge 85) and (ord(nj) le 96)),
      loop(j$(ord(j)=ord(nj)-24),
      loop(ni,
      loop(i$(ord(i)=ord(ni)),
      sam2(r,i,j)=sam15(r,ni,nj);
      );
      );
      );
      );
      *end of loop r
      );
       
       
       
GAMS Rev 234  WIN-VS8 23.4.3 x86/MS Windows                                                        02/28/12 12:20:00 Page 5
Read a single state file
C o m p i l a t i o n


       
       
      loop(r,
      negval2(r,i,j) = yes$(sam2(r,i,j) < 0);
       
      empty2(r,i,"row") = 1$(sum(j, sam2(r,i,j)) = 0);
      empty2(r,j,"col") = 1$(sum(i, sam2(r,i,j)) = 0);
       
      chksam2(r,i,"before") = sum(j, sam2(r,i,j)-sam2(r,j,i));
      chksam2(r,i,"scale") = sum(j, sam2(r,j,i));
      chksam2(r,i,"%dev")$sum(j, sam2(r,i,j)) = 100 * sum(j, sam2(r,i,j)-sam2(r,j,i)) / sum(j, sam2(r,i,j));
       
      );
 272   
 273   
GAMS Rev 234  WIN-VS8 23.4.3 x86/MS Windows                                                        02/28/12 12:20:00 Page 6
Read a single state file
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  C:\Users\DaZHANG\data\ChinaBalancedSAM\egydatabalance.gms
     2      107 IF EXIST       1     107  C:\Users\DaZHANG\data\ChinaBalancedSAM\data\gdx\egygdx\OIL.gdx
     3      108 GDXIN          1     112  C:\Users\DaZHANG\data\ChinaBalancedSAM\data\gdx\egygdx\OIL.gdx


COMPILATION TIME     =        0.000 SECONDS      3 Mb  WIN234-234 May 21, 2010
GAMS Rev 234  WIN-VS8 23.4.3 x86/MS Windows                                                        02/28/12 12:20:00 Page 7
Read a single state file
E x e c u t i o n


----    110 PARAMETER oil  oil ebt

           PROD          DX           X         DRC          RC       ROILT       ELEHT         IND         OTH          FU

BEJ      67.258       0.014                 862.546     502.824    1354.641                                           3.829
TAJ    2867.086    1883.695     268.434      70.673     718.157    1323.155                  17.286                  16.929
HEB     995.263     200.133                 410.796     465.252    1534.502                  51.489                  20.858
NMG     256.176     123.988                   0.004      85.702     190.069                  13.969
LIA    2033.269       5.714      17.472    5089.959    1637.176    8074.233       1.200     288.349      15.715      39.901
JIL     927.819                             528.025                 937.004                 471.125                   0.586
HLJ    6028.163    3629.258                 118.388     253.148    2202.701                 420.194                  71.473
SHH     119.931      11.057                 245.176    2220.387    2450.149                                           6.429
JSU     364.564      28.543                1079.450    2163.629    3469.727                  22.015                  14.043
ZHJ     118.702       0.007                 639.841    2559.158    3190.667      21.645       0.230
ANH      13.557       1.814                 389.822     249.462     639.284                   5.129
FUJ      31.658                             495.881                 503.339
JXI      14.957                             347.964     213.290     563.240                                           3.157
SHD    4186.584    2285.760                1559.180    2571.480    5622.998                 199.505
HEN     751.172     180.689                 158.003     322.864     987.748       0.614      24.558                   6.857
HUB     185.961                            1150.423                1279.140                  13.657                   7.229
HUN      47.430                             645.327     288.263     952.033                   6.143                   1.371
GUD    2041.212                  22.215     516.753    1840.808    4163.555                  30.029                   6.643
GXI      22.466                             205.252                 218.204                   0.343
HAI      15.229                             115.117    1021.435    1157.066                   4.529                   4.543
CHQ       0.271                                                                               0.186
SIC      25.915                             325.335                 338.035                   3.714                   1.043
YUN       0.229                                                                               0.157
SHA    3276.108      56.258     457.152                            2295.403                   3.000
GAN     550.254                            1550.174                2038.798                   8.200
NXA     330.956     160.024                                         150.003                   4.843                   2.514
QIH      17.178       0.007                 213.204                 223.976
XIN    3925.836    1349.313                             246.605    2427.677       0.129     112.345                 136.146

  +         INV

BEJ      74.144
TAJ     146.417
HEB      64.330
NMG      13.856
LIA     317.821
JIL      47.130
HLJ      76.073
SHH     117.860
JSU      73.316
ZHJ     105.154
ANH       6.614
FUJ      24.200
JXI       9.814
SHD     208.982
HEN      31.572
HUB      36.358
HUN      21.472
GUD     176.332
GXI       9.172
HAI     -14.357
CHQ       0.086
SIC       8.457
YUN       0.071
SHA     464.295
GAN      53.430
NXA      13.572
QIH       6.400
XIN     146.832



EXECUTION TIME       =        0.000 SECONDS      4 Mb  WIN234-234 May 21, 2010
GAMS Rev 234  WIN-VS8 23.4.3 x86/MS Windows                                                        02/28/12 12:20:00 Page 8
Read a single state file
E x e c u t i o n


USER: Institute of Nuclear and New Energy Technology G101217:1031AV-WIN
      TsingHua Univerrsity                                       DC8455
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      C:\Users\DaZHANG\data\ChinaBalancedSAM\egydatabalance.gms
Output     C:\Users\DaZHANG\data\ChinaBalancedSAM\listings\OIL_balance.lst
