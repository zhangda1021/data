GAMS Rev 234  WIN-VS8 23.4.3 x86/MS Windows                                                        02/28/12 12:20:00 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


       
       
      Here is a "MAP" of the EBT (coal, fuelgas, oil, refined oil, natural gas, electricity and heat, other energy)
       
       
       
                 PROD    DX       X      DRC     RC     COAL     FG     OIL      ROIL     NG     ELEH    OTHE
       
              ------------------------------------------------------------------------------------------------
      BEJ     |       |       |       |       |       |       |       |       |       |       |       |       |
              ------------------------------------------------------------------------------------------------
      ...
              ------------------------------------------------------------------------------------------------
      XIN     |       |       |       |       |       |       |       |       |       |       |       |       |
              ------------------------------------------------------------------------------------------------
       
                 AGR     IND     CON     TR     WRHR    OTH      FU       INV
              ------------------------------------------------------------------------------------------------
      BEJ     |       |       |       |       |       |       |       |       |       |       |       |       |
              ------------------------------------------------------------------------------------------------
      ...
              ------------------------------------------------------------------------------------------------
      XIN     |       |       |       |       |       |       |       |       |       |       |       |       |
              ------------------------------------------------------------------------------------------------
       
      We need rebalance EBT in order to:
      a) All the data is consitent with the national EBT (0401.xls)
      b) SUM(DX)=SUM(DRC)
       
      After the rebalancing work, we can estimate detailed industry energy consumption of each province.
       
GAMS Rev 234  WIN-VS8 23.4.3 x86/MS Windows                                                        02/28/12 12:20:00 Page 2
Read a single state file
C o m p i l a t i o n


  35   
  39   
  40  *SAM table
  41  set     e       energy product  /
  42           coal    Coal,
  43           fg      Fuel gas,
  44           oil     Crude oil,
  45           roil    Refined oil,
  46           ng      Natural gas,
  47           eleh    Electricity & heat,
  48           othe    Other energy/;
  49  set     indi    egy-intensive sectors    /
  50           COAL,
  51           OIL,
  52           MM,
  53           NM,
  54           FBT,
  55           TXT,
  56           CLO,
  57           LOG,
  58           PAP,
  59           ROIL,
  60           CHE,
  61           NMP,
  62           MSP,
  63           MP,
  64           GSM,
  65           TME,
  66           EME,
  67           CCE,
  68           IM,
  69           AC,
  70           WAS,
  71           ELEH,
  72           FG,
  73           WT/;
  74  set     i       accounts /
  75           PROD    Production,
  76           DX      Domestic outflow,
  77           X       Export,
  78           DRC     Domestic inflow,
  79           RC      Import,
  80           COALT   Coal converted from other energy product,
  81           FGT     Fuel gas converted from other energy product,
  82           OILT   Crude oil converted from other energy product,
  83           ROILT   Refined oil converted from other energy product,
  84           NGT     Natural gas converted from other energy productconverted from other energy product,
  85           ELEHT   Electricity & heat converted from other energy product,
  86           OTHET   Other energy converted from other energy product,
  87           AGR     Agriculture,
  88           IND     Industry,
  89           CON     Construction,
  90           TR      Transportation,
  91           WRHR    Wholesale & retail, hotel & restraurant,
  92           OTH     Other service industry,
  93           FU      Final use,
  94           INV     Inventory change/;
  95   
  96  set      r China provinces       /BEJ,TAJ,HEB,SHX,NMG,LIA,JIL,HLJ,SHH,JSU,ZHJ,ANH,FUJ,JXI,SHD,HEN,HUB,HUN,GUD,GXI,HAI
      ,CHQ,SIC,GZH,YUN,SHA,GAN,NXA,QIH,XIN/;
  97  parameter coal(r,i)           coal ebt
  98  parameter fg(r,i)           fg ebt
  99  parameter oil(r,i)           oil ebt
 100  parameter roil(r,i)           roil ebt
 101  parameter ng(r,i)           ng ebt
 102  parameter eleh(r,i)           eleh ebt
 103  parameter othe(r,i)           othe ebt
 104  parameter ind(*,indi,e)           egy cons of egy by intensive ind
 105  parameter indprov(*,r,e)       egy cons of egy product by province
 106   
GDXIN   C:\Users\DaZHANG\data\ChinaBalancedSAM\data\gdx\egygdx\FG.gdx
--- LOAD  fg = 1:fg
 110  display FG
GAMS Rev 234  WIN-VS8 23.4.3 x86/MS Windows                                                        02/28/12 12:20:00 Page 3
Read a single state file
C o m p i l a t i o n


 111   
      set     negval2(r,i,j)     Flag for negative elements;
      set     empty2(r,i,*)      Flag for empty rows and columns;
      parameter       chksam2(r,i,*)       Consistency check of social accounts;
       
      *SAM15
      loop(r,
       
      loop(ri$((ord(ri) le 27)),
      loop(ni$(ord(ni)=ord(ri)),
      loop(rj,
      loop(nj$(ord(nj)=ord(rj)),
      sam15(r,ni,nj)=sam(r,ri,rj);
      );
      );
      );
      );
       
      loop(rj,
      loop(nj$(ord(nj)=ord(rj)),
      sam15(r,"28",nj)=sam(r,"30",rj);
      );
      );
       
       
      *AGGREGATION OF OTH PRODUCTION(other service industry)
      loop(ri$(((ord(ri) ge 31) and (ord(ri) le 42)) or (ord(ri) = 28) or (ord(ri) = 29)),
      loop(rj,
      loop(nj$(ord(nj)=ord(rj)),
      sam15(r,"29",nj)=sam15(r,"29",nj)+sam(r,ri,rj);
      );
      );
      );
       
      loop(ri$((ord(ri) ge 43) and (ord(ri) le 69)),
      loop(ni$(ord(ni)=ord(ri)-12),
      loop(rj,
      loop(nj$(ord(nj)=ord(rj)),
      sam15(r,ni,nj)=sam(r,ri,rj);
      );
      );
      );
      );
       
       
      loop(rj,
      loop(nj$(ord(nj)=ord(rj)),
      sam15(r,"58",nj)=sam(r,"72",rj);
      );
      );
       
      *AGGREGATION OF OTH COMMODITIES(other service industry)
      loop(ri$(((ord(ri) ge 73) and (ord(ri) le 84)) or (ord(ri) = 70) or (ord(ri) = 71)),
      loop(rj,
      loop(nj$(ord(nj)=ord(rj)),
      sam15(r,"59",nj)=sam15(r,"59",nj)+sam(r,ri,rj);
      );
      );
      );
       
      loop(ri$((ord(ri) ge 85) and (ord(ri) le 96)),
      loop(ni$(ord(ni)=ord(ri)-24),
      loop(rj,
      loop(nj$(ord(nj)=ord(rj)),
      sam15(r,ni,nj)=sam(r,ri,rj);
      );
      );
      );
      );
      *end of loop r
      );
       
       
GAMS Rev 234  WIN-VS8 23.4.3 x86/MS Windows                                                        02/28/12 12:20:00 Page 4
Read a single state file
C o m p i l a t i o n


       
       
      *SAM2
       
       
      loop(r,
       
      loop(nj$(ord(nj) le 27),
      loop(j$(ord(j)=ord(nj)),
      loop(ni,
      loop(i$(ord(i)=ord(ni)),
      sam2(r,i,j)=sam15(r,ni,nj);
      );
      );
      );
      );
       
      loop(ni,
      loop(i$(ord(i)=ord(ni)),
      sam2(r,i,"28")=sam15(r,ni,"30");
      );
      );
       
       
      *AGGREGATION OF OTH PRODUCTION(other service industry)
      loop(nj$(((ord(nj) ge 31) and (ord(nj) le 42)) or (ord(nj) = 28) or (ord(nj) = 29)),
      loop(ni,
      loop(i$(ord(i)=ord(ni)),
      sam2(r,i,"29")=sam2(r,i,"29")+sam15(r,ni,nj);
      );
      );
      );
       
      loop(nj$((ord(nj) ge 43) and (ord(nj) le 69)),
      loop(j$(ord(j)=ord(nj)-12),
      loop(ni,
      loop(i$(ord(i)=ord(ni)),
      sam2(r,i,j)=sam15(r,ni,nj);
      );
      );
      );
      );
       
       
      loop(ni,
      loop(i$(ord(i)=ord(ni)),
      sam2(r,i,"58")=sam15(r,ni,"72");
      );
      );
       
      *AGGREGATION OF OTH COMMODITIES(other service industry)
      loop(nj$(((ord(nj) ge 73) and (ord(nj) le 84)) or (ord(nj) = 70) or (ord(nj) = 71)),
      loop(ni,
      loop(i$(ord(i)=ord(ni)),
      sam2(r,i,"59")=sam2(r,i,"59")+sam15(r,ni,nj);
      );
      );
      );
       
      loop(nj$((ord(nj) ge 85) and (ord(nj) le 96)),
      loop(j$(ord(j)=ord(nj)-24),
      loop(ni,
      loop(i$(ord(i)=ord(ni)),
      sam2(r,i,j)=sam15(r,ni,nj);
      );
      );
      );
      );
      *end of loop r
      );
       
       
       
GAMS Rev 234  WIN-VS8 23.4.3 x86/MS Windows                                                        02/28/12 12:20:00 Page 5
Read a single state file
C o m p i l a t i o n


       
       
      loop(r,
      negval2(r,i,j) = yes$(sam2(r,i,j) < 0);
       
      empty2(r,i,"row") = 1$(sum(j, sam2(r,i,j)) = 0);
      empty2(r,j,"col") = 1$(sum(i, sam2(r,i,j)) = 0);
       
      chksam2(r,i,"before") = sum(j, sam2(r,i,j)-sam2(r,j,i));
      chksam2(r,i,"scale") = sum(j, sam2(r,j,i));
      chksam2(r,i,"%dev")$sum(j, sam2(r,i,j)) = 100 * sum(j, sam2(r,i,j)-sam2(r,j,i)) / sum(j, sam2(r,i,j));
       
      );
 272   
 273   
GAMS Rev 234  WIN-VS8 23.4.3 x86/MS Windows                                                        02/28/12 12:20:00 Page 6
Read a single state file
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  C:\Users\DaZHANG\data\ChinaBalancedSAM\egydatabalance.gms
     2      107 IF EXIST       1     107  C:\Users\DaZHANG\data\ChinaBalancedSAM\data\gdx\egygdx\FG.gdx
     3      108 GDXIN          1     112  C:\Users\DaZHANG\data\ChinaBalancedSAM\data\gdx\egygdx\FG.gdx


COMPILATION TIME     =        0.015 SECONDS      3 Mb  WIN234-234 May 21, 2010
GAMS Rev 234  WIN-VS8 23.4.3 x86/MS Windows                                                        02/28/12 12:20:00 Page 7
Read a single state file
E x e c u t i o n


----    110 PARAMETER fg  fg ebt

           PROD          DX           X         DRC          RC         FGT       ROILT       ELEHT         AGR         IND

BEJ       1.046      61.235                  67.615                 291.569    -266.450      94.489       0.103     369.847
TAJ      79.099      55.830                   2.263       0.926                -136.426      26.281                 109.925
HEB    1011.650      79.288                  39.991       0.017      19.268    -681.556     465.332       0.274    1048.139
SHX     345.120                              11.606                  31.809   -1091.980     365.774                1009.101
NMG     492.367       0.007                  10.966                            -143.662     178.965                 440.491
LIA     764.668     178.647       0.051      23.794       0.069     988.418    -978.150     467.842                1883.731
JIL     151.281                              57.616                  22.321    -135.248      34.902                 233.207
HLJ       0.034      35.006                                         114.467    -360.114      59.145                 221.531
SHH     300.714       9.240                  42.653      29.897      67.464    -422.441     290.938                 411.037
JSU     638.349      32.160                   0.480      54.858       0.727    -454.711     338.047                 645.019
ZHJ      44.264                  -0.654     138.355      88.400                -293.361      13.043                 189.458
ANH     122.275       0.228                   8.632                  12.973    -215.460     148.550                 142.212
FUJ     176.372                             142.013                   0.203     -61.082      45.653       0.034     180.262
JXI     546.439      29.092                  64.824                  16.255    -143.190      94.488                 569.372
SHD     106.279       0.029                 111.118                            -634.358     197.763                 299.820
HEN     316.891      31.438                  20.059                 139.889    -222.840     105.935                 483.264
HUB      33.936                              11.177                            -354.540     163.751                 134.656
HUN       0.480      16.610                  46.800                 237.759    -235.812      79.104                 309.364
GUD     279.741       4.286                 344.576     499.084      41.990    -353.723      21.631                 647.878
GXI     301.636                             147.773                  19.931     -83.164      95.665       8.383     285.724
HAI                  76.938       0.583       6.091                            -125.587       3.064                  33.231
CHQ      26.977                              17.400                              -9.399       5.590       1.886      31.060
SIC                   0.016                  76.182                             -13.097      76.166                  13.097
GZH      45.028                              21.154                             -21.623      19.596                  35.821
YUN       1.064       0.003                  24.723                 339.414                  73.263                 252.162
SHA                   0.291                  94.641                  -1.485    -151.881      46.735       0.049      38.916
GAN       9.583      43.406                                           3.854    -239.981      42.386                 154.888
NXA                   6.600                                                     -23.126                               7.353
QIH       0.259       9.420                                                     -35.825                              21.829
XIN     152.773     122.459                                                    -248.780      57.869                 180.985

  +         CON          TR        WRHR         OTH          FU         INV

BEJ       1.114       1.097      47.332       3.514      47.263       0.686
TAJ       0.274                   5.640       3.000      17.353       0.411
HEB       0.137       0.073       1.689       9.820     147.680       0.051
SHX       0.103                  23.943       0.103      81.491
NMG                                                      27.532
LIA       6.926       0.274      47.725      11.255     158.270       0.377
JIL                               1.076                  97.143       0.137
HLJ                                                     158.898       0.034
SHH       0.234      11.768      23.771      23.969      88.182       4.029
JSU                   0.309      12.072                 120.969       0.549
ZHJ                              42.858      17.143     300.002       2.529
ANH                                                      68.249       0.103
FUJ                   0.017       6.274                 147.173       0.257
JXI                   0.034      20.122                  57.360       0.240
SHD                  13.457      38.972      17.886     278.485       5.343
HEN                              11.233                  67.055       0.754
HUB                              13.372                  87.806       0.069
HUN       1.509       0.034      43.680                  70.601      -0.051
GUD       1.097      62.418      48.030       2.674     721.380       9.720
GXI                              23.246       1.526     125.189      12.772
HAI                               6.000                  11.143       0.720
CHQ       0.909       1.371       5.657                   7.303
GZH                   2.641      10.072       0.120      19.556
YUN                               6.720       0.394      31.495       1.166
SHA                               0.629                  91.558      66.858
GAN                   1.286       0.034                  11.159       0.257
NXA                                                       9.172
QIH                                                       4.834
XIN                   4.286       6.514       3.549      25.892



EXECUTION TIME       =        0.000 SECONDS      4 Mb  WIN234-234 May 21, 2010
GAMS Rev 234  WIN-VS8 23.4.3 x86/MS Windows                                                        02/28/12 12:20:00 Page 8
Read a single state file
E x e c u t i o n


USER: Institute of Nuclear and New Energy Technology G101217:1031AV-WIN
      TsingHua Univerrsity                                       DC8455
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      C:\Users\DaZHANG\data\ChinaBalancedSAM\egydatabalance.gms
Output     C:\Users\DaZHANG\data\ChinaBalancedSAM\listings\FG_balance.lst
